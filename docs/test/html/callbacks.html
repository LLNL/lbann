<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LBANN: Callbacks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LBANN
   &#160;<span id="projectnumber">@LBANN_MAJOR_VERSION@.@LBANN_MINOR_VERSION@</span>
   </div>
   <div id="projectbrief">LivermoreBigArtificialNeuralNetworkToolkit</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('callbacks.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Callbacks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Base class for callbacks during training/testing. The method of each callback is called at a given point during training or testing by the model. Implement whichever ones you care about. Callbacks may be passed a lbann_summary instance, which they can use to log whatever relevant information they need to. LBANN supported callbacks are found below.</p>
<h1><a class="anchor" id="checkdata"></a>
Check Dataset</h1>
<p>Save the sample indices for each mini-batch to ordered set. Check to make sure that all samples were properly processed.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__check__dataset.html">lbann::lbann_callback_check_dataset</a></p>
<h1><a class="anchor" id="checkinit"></a>
Check Initialization</h1>
<p>Verify that every model uses the same initialization.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__check__init.html">lbann::lbann_callback_check_init</a></p>
<h1><a class="anchor" id="checkreconstruction"></a>
Check Reconstruction</h1>
<p>Stop training after reconstruction error has reached a given value.</p>
<p>Implementation details: lbann::lbann_callback_check_reconstruction_erro</p>
<h1><a class="anchor" id="checknan"></a>
Check NAN</h1>
<p>Check matrices for whether they include any NaNs or infs to help debugging. This will kill the rank if such values are discovered.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__checknan.html">lbann::lbann_callback_checknan</a></p>
<h1><a class="anchor" id="checksmall"></a>
Check Small</h1>
<p>Check matrices for whether they include any very small values to avoid getting denormalized values. Denormalized values can significantly slow floating point computations. Since we often square values, the check is based on the square root of the smallest floating point value. This will kill the rank if such values are discovered.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__checksmall.html">lbann::lbann_callback_checksmall</a></p>
<h1><a class="anchor" id="dump_acts"></a>
Dump Activations</h1>
<p>Dump activations matrices to files. This will dump each or selected hidden layer's activation matrix after each minibatch or at the end of an epoch. The matrices are written to files using Elemental's simple ASCII format. This is not meant for checkpointing, but for exporting acitvation matrices for analysis that isn't easily done in LBANN. This will be slow and produce a lot of output if matrices are dumped during each minibatch. If list of layers at which to dump activations is provided, activations/inferences will be dumped at the end of testing</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__dump__activations.html">lbann::lbann_callback_dump_activations</a></p>
<h1><a class="anchor" id="dump_grads"></a>
Dump Gradients</h1>
<p>Dump gradient matrices to files. This will dump each hidden layer's gradient matrix after each minibatch. The matrices are written to files using Elemental's simple ASCII format. This is not meant for checkpointing, but for exporting gradient matrices for analysis that isn't easily done in LBANN. Note this dumps matrices during each mini-batch. This will be slow and produce a lot of output.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__dump__gradients.html">lbann::lbann_callback_dump_gradients</a></p>
<h1><a class="anchor" id="dump_mb_sample_indices"></a>
Dump Minibatch Sample Indices</h1>
<p>Dump sample indices for each minibatch to files. This will dump the list of indices from the training / validation / testing data that was processed Note this dumps vectors during each mini-batch. This will be slow and produce a lot of output.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__dump__minibatch__sample__indices.html">lbann::lbann_callback_dump_minibatch_sample_indices</a></p>
<h1><a class="anchor" id="dump_wei"></a>
Dump Weights</h1>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__dump__weights.html">lbann::lbann_callback_dump_weights</a></p>
<h1><a class="anchor" id="earlystop"></a>
Early Stopping</h1>
<p>Stop training after validation error stops improving.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__early__stopping.html">lbann::lbann_callback_early_stopping</a></p>
<h1><a class="anchor" id="gradientcheck"></a>
Gradient Check</h1>
<p>Callback hooks for gradient check.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__gradient__check.html">lbann::lbann_callback_gradient_check</a></p>
<h1><a class="anchor" id="hang"></a>
Hang</h1>
<p>Hang LBANN as training starts so debuggers can attach. This will cause either a specific rank (in COMM_WORLD) or every rank to hang. Attach to the hung ranks and set the hang flag to false with a debugger to proceed.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__hang.html">lbann::lbann_callback_hang</a></p>
<h1><a class="anchor" id="im_comm"></a>
Inter-model Communication</h1>
<p>Support inter-model communication after each mini-batch to synchronize gradient updates. This optionally supports quantizing the gradient updates before communication in order to reduce bandwidth requirements.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__imcomm.html">lbann::lbann_callback_imcomm</a></p>
<h1><a class="anchor" id="io"></a>
Print IO</h1>
<p>Print information on the amount of IO that layers do.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__io.html">lbann::lbann_callback_io</a></p>
<h1><a class="anchor" id="learningrate"></a>
Learning Rate</h1>
<p>Base class for learning rate schedules. Child classes should implement the schedule method to make changes.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__learning__rate.html">lbann::lbann_callback_learning_rate</a></p>
<h1><a class="anchor" id="LTFB"></a>
Manage LTFB</h1>
<p>Manage LTFB training. LTFB works in rounds, which are made up of some number of mini-batches (that evenly divide the number of minibatches in an epoch). In each round, the model trains as usual, and at the end it is randomly paired with another model. The pairs exchange their models and evaluate both their local and the received model on their validation data. The model achieving the highest accuracy is retained and training continues. Current limitations:</p><ul>
<li>Does not transfer optimizer state, so it's best to stick to SGD without momentum.</li>
<li>Uses the validation data for the tournament (we may not want this).</li>
<li><p class="startli">Requires a manually-created model duplicate.</p>
<p class="startli">Implementation details: <a class="el" href="classlbann_1_1lbann__callback__ltfb.html">lbann::lbann_callback_ltfb</a></p>
</li>
</ul>
<h1><a class="anchor" id="print_acc"></a>
Print Accuracy</h1>
<p>Periodically print computational results. Prints average objective function value and metric scores after each training epoch and evaluation.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__print.html">lbann::lbann_callback_print</a></p>
<h1><a class="anchor" id="save_images"></a>
Save Images</h1>
<p>Save images to file</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__save__images.html">lbann::lbann_callback_save_images</a></p>
<h1><a class="anchor" id="summary"></a>
Summary</h1>
<p>Summarize information to Tensorboard using LBANN's summary interface.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__summary.html">lbann::lbann_callback_summary</a></p>
<h1><a class="anchor" id="timer"></a>
Timer</h1>
<p>Record and report model timing results. Reports the total time and mini-batch time statistics for training epochs and for model evaluations. This reports times for the master process in each model.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__timer.html">lbann::lbann_callback_timer</a></p>
<h1><a class="anchor" id="dbg"></a>
Debug</h1>
<p>Print status updates on where training is.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__debug.html">lbann::lbann_callback_debug</a></p>
<h1><a class="anchor" id="variable_mb"></a>
Variable Minibatch</h1>
<p>Support changing the mini-batch size on different schedules. Implementations should override implement the abstract methods to define concrete schedules.</p>
<p>Implementation details: <a class="el" href="classlbann_1_1lbann__callback__variable__minibatch.html">lbann::lbann_callback_variable_minibatch</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 24 2018 15:13:30 for LBANN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
